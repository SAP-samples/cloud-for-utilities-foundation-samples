<!DOCTYPE html>
<html lang="en" class="color-toggle-hidden">

<head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="color-scheme" content="light dark" />





    <meta name="description" content="Extending Cloud for Utilities (C4U CO)    This document provides a step-by-step process to extend C4U CO while also providing in depth technical information that will allow you to extend C4U CO functionality for your use cases.
C4U CO is built upon the SAP Cloud Application Programming Model framework which allows C4U CO to focus on exposing its vast domain expertise by:
 Focusing on the core domain and domain logic.">



    <title>Extensibility | SAP Cloud For Utilities</title>

    <link rel="icon" href="/pages/I820920/capextensibility/favicon/favicon-32x32.png" type="image/x-icon">

    <script src="/pages/I820920/capextensibility/js/darkmode-ce906ea916.min.js"></script>

<link rel="preload" as="font" href="/pages/I820920/capextensibility/fonts/Metropolis.woff2" type="font/woff2" crossorigin="anonymous">
<link rel="preload" as="font" href="/pages/I820920/capextensibility/fonts/LiberationSans.woff2" type="font/woff2" crossorigin="anonymous">

<link rel="preload" href="/pages/I820920/capextensibility/main-d75a6db27d.min.css" as="style">
<link rel="stylesheet" href="/pages/I820920/capextensibility/main-d75a6db27d.min.css" media="all">

<link rel="preload" href="/pages/I820920/capextensibility/mobile-249b801e7d.min.css" as="style">
<link rel="stylesheet" href="/pages/I820920/capextensibility/mobile-249b801e7d.min.css" media="screen and (max-width: 45rem)">

<link rel="preload" href="/pages/I820920/capextensibility/print-f79fc3e5d7.min.css" as="style">
<link rel="stylesheet" href="/pages/I820920/capextensibility/print-f79fc3e5d7.min.css" media="print">

<link rel="preload" href="/pages/I820920/capextensibility/custom.css" as="style">
<link rel="stylesheet" href="/pages/I820920/capextensibility/custom.css" media="all">



<!-- Made with Geekdoc theme https://github.com/thegeeklab/hugo-geekdoc -->

    

</head>

<body itemscope itemtype="https://schema.org/WebPage">
    
<!-- geekdoc include: sprites/geekdoc.svg -->
<svg class="svg-sprite" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><symbol viewBox="-2.29 -2.29 28.57 28.57" id="gdoc_arrow_back" xmlns="http://www.w3.org/2000/svg"><path d="M24 10.526v2.947H5.755l8.351 8.421-2.105 2.105-12-12 12-12 2.105 2.105-8.351 8.421H24z"/></symbol><symbol viewBox="-2.29 -2.29 28.57 28.57" id="gdoc_arrow_left_alt" xmlns="http://www.w3.org/2000/svg"><path d="M5.965 10.526V6.035L0 12l5.965 5.965v-4.491H24v-2.947H5.965z"/></symbol><symbol viewBox="-2.29 -2.29 28.57 28.57" id="gdoc_arrow_right_alt" xmlns="http://www.w3.org/2000/svg"><path d="M18.035 10.526V6.035L24 12l-5.965 5.965v-4.491H0v-2.947h18.035z"/></symbol><symbol viewBox="-2.29 -2.29 32.57 32.57" id="gdoc_bitbucket" xmlns="http://www.w3.org/2000/svg"><path d="M15.905 13.355c.189 1.444-1.564 2.578-2.784 1.839-1.375-.602-1.375-2.784-.034-3.403 1.151-.705 2.818.223 2.818 1.564zm1.907-.361c-.309-2.44-3.076-4.056-5.328-3.042-1.426.636-2.389 2.148-2.32 3.747.086 2.097 2.08 3.815 4.176 3.626s3.729-2.234 3.472-4.331zm4.108-9.315c-.756-.997-2.045-1.169-3.179-1.358-3.214-.516-6.513-.533-9.727.034-1.066.172-2.269.361-2.939 1.323 1.1 1.031 2.664 1.186 4.073 1.358 2.544.327 5.156.344 7.699.017 1.426-.172 3.008-.309 4.073-1.375zm.979 17.788c-.481 1.684-.206 3.953-1.994 4.932-3.076 1.701-6.806 1.89-10.191 1.289-1.787-.327-3.884-.894-4.864-2.578-.43-1.65-.705-3.334-.98-5.018l.103-.275.309-.155c5.121 3.386 12.288 3.386 17.427 0 .808.241.206 1.22.189 1.805zM26.01 4.951c-.584 3.764-1.255 7.51-1.908 11.257-.189 1.1-1.255 1.719-2.148 2.183-3.214 1.615-6.96 1.89-10.483 1.512-2.389-.258-4.829-.894-6.771-2.389-.911-.705-.911-1.908-1.083-2.922-.602-3.523-1.289-7.046-1.719-10.604.206-1.547 1.942-2.217 3.231-2.698C6.848.654 8.686.362 10.508.19c3.884-.378 7.854-.241 11.618.859 1.341.395 2.784.945 3.695 2.097.412.533.275 1.203.189 1.805z"/></symbol><symbol viewBox="-2.29 -2.29 28.57 28.57" id="gdoc_bookmark" xmlns="http://www.w3.org/2000/svg"><path d="M15.268 4.392q.868 0 1.532.638t.664 1.506v17.463l-7.659-3.268-7.608 3.268V6.536q0-.868.664-1.506t1.532-.638h10.876zm4.34 14.144V4.392q0-.868-.638-1.532t-1.506-.664H6.537q0-.868.664-1.532T8.733 0h10.876q.868 0 1.532.664t.664 1.532v17.412z"/></symbol><symbol viewBox="-2.29 -2.29 32.57 32.57" id="gdoc_brightness_auto" xmlns="http://www.w3.org/2000/svg"><path d="M16.846 18.938h2.382L15.22 7.785h-2.44L8.772 18.938h2.382l.871-2.44h3.95zm7.087-9.062L27.999 14l-4.066 4.124v5.809h-5.809L14 27.999l-4.124-4.066H4.067v-5.809L.001 14l4.066-4.124V4.067h5.809L14 .001l4.124 4.066h5.809v5.809zm-11.385 4.937L14 10.282l1.452 4.531h-2.904z"/></symbol><symbol viewBox="-2.29 -2.29 32.57 32.57" id="gdoc_brightness_dark" xmlns="http://www.w3.org/2000/svg"><path d="M14 21.435q3.079 0 5.257-2.178T21.435 14t-2.178-5.257T14 6.565q-1.51 0-3.079.697 1.917.871 3.108 2.701T15.22 14t-1.191 4.037-3.108 2.701q1.568.697 3.079.697zm9.933-11.559L27.999 14l-4.066 4.124v5.809h-5.809L14 27.999l-4.124-4.066H4.067v-5.809L.001 14l4.066-4.124V4.067h5.809L14 .001l4.124 4.066h5.809v5.809z"/></symbol><symbol viewBox="-2.29 -2.29 32.57 32.57" id="gdoc_brightness_light" xmlns="http://www.w3.org/2000/svg"><path d="M14 21.435q3.079 0 5.257-2.178T21.435 14t-2.178-5.257T14 6.565 8.743 8.743 6.565 14t2.178 5.257T14 21.435zm9.933-3.311v5.809h-5.809L14 27.999l-4.124-4.066H4.067v-5.809L.001 14l4.066-4.124V4.067h5.809L14 .001l4.124 4.066h5.809v5.809L27.999 14z"/></symbol><symbol viewBox="-2.29 -2.29 32.57 32.57" id="gdoc_cloud_off" xmlns="http://www.w3.org/2000/svg"><path d="M9.023 10.5H7q-1.914 0-3.281 1.395t-1.367 3.309 1.367 3.281T7 19.852h11.375zM3.5 4.976l1.477-1.477L24.5 23.022l-1.477 1.477-2.352-2.297H6.999q-2.898 0-4.949-2.051t-2.051-4.949q0-2.844 1.969-4.867t4.758-2.133zm19.086 5.578q2.242.164 3.828 1.832T28 16.351q0 3.008-2.461 4.758l-1.695-1.695q1.805-.984 1.805-3.063 0-1.422-1.039-2.461t-2.461-1.039h-1.75v-.602q0-2.68-1.859-4.539t-4.539-1.859q-1.531 0-2.953.711l-1.75-1.695Q11.431 3.5 14.001 3.5q2.953 0 5.496 2.078t3.09 4.977z"/></symbol><symbol viewBox="-2.29 -2.29 32.57 32.57" id="gdoc_code" xmlns="http://www.w3.org/2000/svg"><path d="M9.917 24.5a1.75 1.75 0 10-3.501.001 1.75 1.75 0 003.501-.001zm0-21a1.75 1.75 0 10-3.501.001A1.75 1.75 0 009.917 3.5zm11.666 2.333a1.75 1.75 0 10-3.501.001 1.75 1.75 0 003.501-.001zm1.75 0a3.502 3.502 0 01-1.75 3.026c-.055 6.581-4.721 8.039-7.82 9.023-2.898.911-3.846 1.349-3.846 3.117v.474a3.502 3.502 0 011.75 3.026c0 1.932-1.568 3.5-3.5 3.5s-3.5-1.568-3.5-3.5c0-1.294.711-2.424 1.75-3.026V6.526A3.502 3.502 0 014.667 3.5c0-1.932 1.568-3.5 3.5-3.5s3.5 1.568 3.5 3.5a3.502 3.502 0 01-1.75 3.026v9.06c.93-.456 1.914-.766 2.807-1.039 3.391-1.075 5.323-1.878 5.359-5.687a3.502 3.502 0 01-1.75-3.026c0-1.932 1.568-3.5 3.5-3.5s3.5 1.568 3.5 3.5z"/></symbol><symbol viewBox="-2.29 -2.29 36.57 36.57" id="gdoc_date" xmlns="http://www.w3.org/2000/svg"><path d="M27.192 28.844V11.192H4.808v17.652h22.384zm0-25.689q1.277 0 2.253.976t.976 2.253v22.459q0 1.277-.976 2.216t-2.253.939H4.808q-1.352 0-2.291-.901t-.939-2.253V6.385q0-1.277.939-2.253t2.291-.976h1.577V.001h3.23v3.155h12.769V.001h3.23v3.155h1.577zm-3.155 11.267v3.155h-3.23v-3.155h3.23zm-6.46 0v3.155h-3.155v-3.155h3.155zm-6.384 0v3.155h-3.23v-3.155h3.23z"/></symbol><symbol viewBox="-2.29 -2.29 36.57 36.57" id="gdoc_download" xmlns="http://www.w3.org/2000/svg"><path d="M2.866 28.209h26.269v3.79H2.866v-3.79zm26.268-16.925L16 24.418 2.866 11.284h7.493V.001h11.283v11.283h7.493z"/></symbol><symbol viewBox="-2.29 -2.29 36.57 36.57" id="gdoc_email" xmlns="http://www.w3.org/2000/svg"><path d="M28.845 9.615v-3.23L16 14.422 3.155 6.385v3.23L16 17.577zm0-6.46q1.277 0 2.216.977T32 6.385v19.23q0 1.277-.939 2.253t-2.216.977H3.155q-1.277 0-2.216-.977T0 25.615V6.385q0-1.277.939-2.253t2.216-.977h25.69z"/></symbol><symbol viewBox="-2.29 -2.29 32.57 32.57" id="gdoc_git" xmlns="http://www.w3.org/2000/svg"><path d="M27.472 12.753L15.247.529a1.803 1.803 0 00-2.55 0l-2.84 2.84 2.137 2.137a2.625 2.625 0 013.501 3.501l3.499 3.499a2.625 2.625 0 11-1.237 1.237l-3.499-3.499c-.083.04-.169.075-.257.106v7.3a2.626 2.626 0 11-1.75 0v-7.3a2.626 2.626 0 01-1.494-3.607L8.62 4.606l-8.09 8.09a1.805 1.805 0 000 2.551l12.225 12.224a1.803 1.803 0 002.55 0l12.168-12.168a1.805 1.805 0 000-2.551z"/></symbol><symbol viewBox="-2.29 -2.29 36.57 36.57" id="gdoc_github" xmlns="http://www.w3.org/2000/svg"><path d="M16 .394c8.833 0 15.999 7.166 15.999 15.999 0 7.062-4.583 13.062-10.937 15.187-.813.146-1.104-.354-1.104-.771 0-.521.021-2.25.021-4.396 0-1.5-.5-2.458-1.083-2.958 3.562-.396 7.312-1.75 7.312-7.896 0-1.75-.625-3.167-1.646-4.291.167-.417.708-2.042-.167-4.25-1.333-.417-4.396 1.646-4.396 1.646a15.032 15.032 0 00-8 0S8.937 6.602 7.603 7.018c-.875 2.208-.333 3.833-.167 4.25-1.021 1.125-1.646 2.542-1.646 4.291 0 6.125 3.729 7.5 7.291 7.896-.458.417-.875 1.125-1.021 2.146-.917.417-3.25 1.125-4.646-1.333-.875-1.521-2.458-1.646-2.458-1.646-1.562-.021-.104.979-.104.979 1.042.479 1.771 2.333 1.771 2.333.938 2.854 5.396 1.896 5.396 1.896 0 1.333.021 2.583.021 2.979 0 .417-.292.917-1.104.771C4.582 29.455-.001 23.455-.001 16.393-.001 7.56 7.165.394 15.998.394zM6.063 23.372c.042-.083-.021-.187-.146-.25-.125-.042-.229-.021-.271.042-.042.083.021.187.146.25.104.062.229.042.271-.042zm.646.709c.083-.062.062-.208-.042-.333-.104-.104-.25-.146-.333-.062-.083.062-.062.208.042.333.104.104.25.146.333.062zm.625.937c.104-.083.104-.25 0-.396-.083-.146-.25-.208-.354-.125-.104.062-.104.229 0 .375s.271.208.354.146zm.875.875c.083-.083.042-.271-.083-.396-.146-.146-.333-.167-.417-.062-.104.083-.062.271.083.396.146.146.333.167.417.062zm1.187.521c.042-.125-.083-.271-.271-.333-.167-.042-.354.021-.396.146s.083.271.271.312c.167.062.354 0 .396-.125zm1.313.104c0-.146-.167-.25-.354-.229-.187 0-.333.104-.333.229 0 .146.146.25.354.229.187 0 .333-.104.333-.229zm1.208-.208c-.021-.125-.187-.208-.375-.187-.187.042-.312.167-.292.312.021.125.187.208.375.167s.312-.167.292-.292z"/></symbol><symbol viewBox="-2.29 -2.29 32.57 32.57" id="gdoc_gitlab" xmlns="http://www.w3.org/2000/svg"><path d="M1.629 11.034L14 26.888.442 17.048a1.09 1.09 0 01-.39-1.203l1.578-4.811zm7.217 0h10.309l-5.154 15.854zM5.753 1.475l3.093 9.559H1.63l3.093-9.559a.548.548 0 011.031 0zm20.618 9.559l1.578 4.811c.141.437-.016.922-.39 1.203l-13.558 9.84 12.371-15.854zm0 0h-7.216l3.093-9.559a.548.548 0 011.031 0z"/></symbol><symbol viewBox="-2.29 -2.29 36.57 36.57" id="gdoc_heart" xmlns="http://www.w3.org/2000/svg"><path d="M16 29.714a1.11 1.11 0 01-.786-.321L4.072 18.643c-.143-.125-4.071-3.714-4.071-8 0-5.232 3.196-8.357 8.535-8.357 3.125 0 6.053 2.464 7.464 3.857 1.411-1.393 4.339-3.857 7.464-3.857 5.339 0 8.535 3.125 8.535 8.357 0 4.286-3.928 7.875-4.089 8.035L16.785 29.392c-.214.214-.5.321-.786.321z"/></symbol><symbol viewBox="-2.29 -2.29 32.57 32.57" id="gdoc_keyborad_arrow_down" xmlns="http://www.w3.org/2000/svg"><path d="M3.281 5.36L14 16.079 24.719 5.36 28 8.641l-14 14-14-14z"/></symbol><symbol viewBox="-2.29 -2.29 36.57 36.57" id="gdoc_keyborad_arrow_left" xmlns="http://www.w3.org/2000/svg"><path d="M25.875 28.25L22.125 32 6.126 16.001 22.125.002l3.75 3.75-12.25 12.25z"/></symbol><symbol viewBox="-2.29 -2.29 36.57 36.57" id="gdoc_keyborad_arrow_right" xmlns="http://www.w3.org/2000/svg"><path d="M6.125 28.25L18.375 16 6.125 3.75 9.875 0l15.999 15.999L9.875 31.998z"/></symbol><symbol viewBox="-2.29 -2.29 36.57 36.57" id="gdoc_link" xmlns="http://www.w3.org/2000/svg"><path d="M24.037 7.963q3.305 0 5.634 2.366T32 16t-2.329 5.671-5.634 2.366h-6.46v-3.08h6.46q2.028 0 3.493-1.465t1.465-3.493-1.465-3.493-3.493-1.465h-6.46v-3.08h6.46zM9.615 17.578v-3.155h12.77v3.155H9.615zM3.005 16q0 2.028 1.465 3.493t3.493 1.465h6.46v3.08h-6.46q-3.305 0-5.634-2.366T0 16.001t2.329-5.671 5.634-2.366h6.46v3.08h-6.46q-2.028 0-3.493 1.465t-1.465 3.493z"/></symbol><symbol viewBox="-2.29 -2.29 36.57 36.57" id="gdoc_menu" xmlns="http://www.w3.org/2000/svg"><path d="M.001 5.334h31.998v3.583H.001V5.334zm0 12.416v-3.5h31.998v3.5H.001zm0 8.916v-3.583h31.998v3.583H.001z"/></symbol><symbol viewBox="-2.29 -2.29 32.57 32.57" id="gdoc_notification" xmlns="http://www.w3.org/2000/svg"><path d="M22.615 19.384l2.894 2.894v1.413H2.49v-1.413l2.894-2.894V12.25q0-3.365 1.716-5.856t4.745-3.231v-1.01q0-.875.606-1.514T13.999 0t1.548.639.606 1.514v1.01q3.029.74 4.745 3.231t1.716 5.856v7.134zM14 27.999q-1.211 0-2.053-.808t-.841-2.019h5.788q0 1.144-.875 1.986T14 27.999z"/></symbol><symbol viewBox="-2.29 -2.29 32.57 32.57" id="gdoc_path" xmlns="http://www.w3.org/2000/svg"><path d="M28 12.62h-9.793V8.414h-2.826v11.173h2.826v-4.206H28V26.62h-9.793v-4.206H12.62v-14H9.794v4.206H.001V1.381h9.793v4.206h8.413V1.381H28V12.62z"/></symbol><symbol viewBox="-2.29 -2.29 36.57 36.57" id="gdoc_person" xmlns="http://www.w3.org/2000/svg"><path d="M16 20.023q5.052 0 10.526 2.199t5.473 5.754v4.023H0v-4.023q0-3.555 5.473-5.754t10.526-2.199zM16 16q-3.275 0-5.614-2.339T8.047 8.047t2.339-5.661T16 0t5.614 2.386 2.339 5.661-2.339 5.614T16 16z"/></symbol><symbol viewBox="-2.29 -2.29 36.57 36.57" id="gdoc_search" xmlns="http://www.w3.org/2000/svg"><path d="M11.925 20.161q3.432 0 5.834-2.402t2.402-5.834-2.402-5.834-5.834-2.402-5.834 2.402-2.402 5.834 2.402 5.834 5.834 2.402zm10.981 0L32 29.255 29.255 32l-9.094-9.094v-1.458l-.515-.515q-3.26 2.831-7.721 2.831-4.976 0-8.45-3.432T.001 11.925t3.474-8.45 8.45-3.474 8.407 3.474 3.432 8.45q0 1.802-.858 4.075t-1.973 3.646l.515.515h1.458z"/></symbol><symbol viewBox="-2.29 -2.29 32.57 32.57" id="gdoc_shield" xmlns="http://www.w3.org/2000/svg"><path d="M22.167 15.166V3.5h-8.166v20.726c.93-.492 2.424-1.349 3.883-2.497 1.95-1.531 4.284-3.919 4.284-6.562zm3.499-13.999v14c0 7.674-10.737 12.523-11.192 12.724-.146.073-.31.109-.474.109s-.328-.036-.474-.109c-.456-.201-11.192-5.049-11.192-12.724v-14C2.334.529 2.863 0 3.501 0H24.5c.638 0 1.167.529 1.167 1.167z"/></symbol><symbol viewBox="-2.29 -2.29 32.57 32.57" id="gdoc_tags" xmlns="http://www.w3.org/2000/svg"><path d="M6.606 7.549c0-1.047-.84-1.887-1.887-1.887s-1.887.84-1.887 1.887.84 1.887 1.887 1.887 1.887-.84 1.887-1.887zm15.732 8.493c0 .501-.206.988-.546 1.327l-7.239 7.254c-.354.339-.84.546-1.342.546s-.988-.206-1.327-.546L1.342 14.066C.59 13.329 0 11.899 0 10.852V4.718a1.9 1.9 0 011.887-1.887h6.134c1.047 0 2.477.59 3.229 1.342L21.792 14.7c.339.354.546.84.546 1.342zm5.661 0c0 .501-.206.988-.546 1.327l-7.239 7.254c-.354.339-.84.546-1.342.546-.767 0-1.15-.354-1.651-.87l6.93-6.93c.339-.339.546-.826.546-1.327s-.206-.988-.546-1.342L13.609 4.173c-.752-.752-2.182-1.342-3.229-1.342h3.303c1.047 0 2.477.59 3.229 1.342L27.454 14.7c.339.354.546.84.546 1.342z"/></symbol></svg>



    <div class="wrapper ">
        <input type="checkbox" class="hidden" id="menu-control" />
        
        <header class="gdoc-header">
    <div class="container flex align-center justify-between">
        
        <label for="menu-control" class="gdoc-nav__control">
            <svg class="icon gdoc_menu"><use xlink:href="#gdoc_menu"></use></svg>
            <svg class="icon gdoc_arrow_back"><use xlink:href="#gdoc_arrow_back"></use></svg>
        </label>
        
        <a class="gdoc-header__link" href="https://github.wdf.sap.corp/pages/I820920/capextensibility">
            <span class="gdoc-brand flex align-center">
                <img class="gdoc-brand__img" src="/pages/I820920/capextensibility/sap-logo-svg.svg" alt="">
                SAP Cloud For Utilities
            </span>
        </a>
        <span id="gdoc-dark-mode">
            <svg class="icon gdoc_brightness_dark"><use xlink:href="#gdoc_brightness_dark"></use></svg>
            <svg class="icon gdoc_brightness_light"><use xlink:href="#gdoc_brightness_light"></use></svg>
            <svg class="icon gdoc_brightness_auto"><use xlink:href="#gdoc_brightness_auto"></use></svg>
        </span>
    </div>
</header>


        <main class="container flex flex-even">
            
            <aside class="gdoc-nav">
                <nav>
    
    <div class="gdoc-search">
        <svg class="icon gdoc_search"><use xlink:href="#gdoc_search"></use></svg>
        <input type="text" id="gdoc-search-input" class="gdoc-search__input" placeholder="Search..."
            aria-label="Search" maxlength="64" />
        <div class="gdoc-search__spinner spinner hidden"></div>
        <ul id="gdoc-search-results" class="gdoc-search__list"></ul>
    </div>



    <section class="gdoc-nav--main">
        <h2>Navigation</h2>
        
            




<ul class="gdoc-nav__list">

    
    

    <li>
        
        
            
            
            
            
            
            
            
            
            

            
            <span class="flex">
                
                <a href="/pages/I820920/capextensibility/Overview/"
                    class="gdoc-nav__entry ">
                    Overview
                </a>
            </span>
            
        

        
            



<ul class="gdoc-nav__list">

    
    

    <li>
        
        
            
            
            
            
            
            
            
            
            

            
            <span class="flex">
                
                <a href="/pages/I820920/capextensibility/Overview/Cloud-Application-Programming/"
                    class="gdoc-nav__entry ">
                    Cloud Application Programming
                </a>
            </span>
            
        

        
            



<ul class="gdoc-nav__list">

    
    

    <li>
        
        
            
            
            
            
            
            
            
            
            

            
            <span class="flex">
                
                <a href="/pages/I820920/capextensibility/Overview/Cloud-Application-Programming/Benefits/"
                    class="gdoc-nav__entry ">
                    Benefits
                </a>
            </span>
            
        

        
    </li>


    
    

    <li>
        
        
            
            
            
            
            
            
            
            
            

            
            <span class="flex">
                
                <a href="/pages/I820920/capextensibility/Overview/Cloud-Application-Programming/Key-Concepts/"
                    class="gdoc-nav__entry ">
                    Key Concepts
                </a>
            </span>
            
        

        
    </li>


</ul>

        
    </li>


</ul>

        
    </li>


    
    

    <li>
        
        
            
            
            
            
            
            
            
            
            

            
            <span class="flex">
                
                <a href="/pages/I820920/capextensibility/Functionality/"
                    class="gdoc-nav__entry ">
                    Functionality
                </a>
            </span>
            
        

        
            



<ul class="gdoc-nav__list">

    
    

    <li>
        
        
            
            
            
            
            
            
            
            
            

            
            <span class="flex">
                
                <a href="/pages/I820920/capextensibility/Functionality/Extending/Extension_Process_Overview/"
                    class="gdoc-nav__entry ">
                    Extension Process Overview
                </a>
            </span>
            
        

        
    </li>


    
    

    <li>
        
        
            
            
            
            
            
            
            
            
            

            
            <span class="flex">
                
                <a href="/pages/I820920/capextensibility/Functionality/Extending/Extensibility/"
                    class="gdoc-nav__entry is-active">
                    Extending
                </a>
            </span>
            
        

        
    </li>


</ul>

        
    </li>


</ul>





        
    </section>

    <section class="gdoc-nav--more">
        
    </section>
</nav>

            </aside>
            

            <div class="gdoc-page">
                
    


    






<div class="gdoc-page__header flex flex-wrap
     justify-between 
     hidden-mobile 
    " itemprop="breadcrumb">
    
    <div>
        <svg class="icon gdoc_path hidden-mobile"><use xlink:href="#gdoc_path"></use></svg>
        <ol class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList">
            
            
            
            
    
    
        
        
        
        
    
    
        
        
        
        
    
    
        
        
        
        
    
    
        <li itemprop='itemListElement' itemscope itemtype='https://schema.org/ListItem'><a itemscope itemtype='https://schema.org/WebPage' itemprop='item' itemid='/pages/I820920/capextensibility/' href='/pages/I820920/capextensibility/'><span itemprop='name'></span></a><meta itemprop='position' content='4' /></li><li> / </li><li itemprop='itemListElement' itemscope itemtype='https://schema.org/ListItem'><a itemscope itemtype='https://schema.org/WebPage' itemprop='item' itemid='/pages/I820920/capextensibility/Functionality/' href='/pages/I820920/capextensibility/Functionality/'><span itemprop='name'>Functionality</span></a><meta itemprop='position' content='5' /></li><li> / </li><li itemprop='itemListElement' itemscope itemtype='https://schema.org/ListItem'><a itemscope itemtype='https://schema.org/WebPage' itemprop='item' itemid='/pages/I820920/capextensibility/Functionality/Extending/' href='/pages/I820920/capextensibility/Functionality/Extending/'><span itemprop='name'>Extending</span></a><meta itemprop='position' content='6' /></li><li> / </li><li itemprop='itemListElement' itemscope itemtype='https://schema.org/ListItem'><span itemprop='name'>Extensibility</span><meta itemprop='position' content='7' /></li>
    

    

    

    

        </ol>
    </div>
    
    
</div>


    <article class="gdoc-markdown gdoc-markdown__align--left">
        <h1>Extensibility</h1>
        <div class="gdoc-page__anchorwrap">
    <h2 id="extending-cloud-for-utilities-c4u-co">
        Extending Cloud for Utilities (C4U CO)
        <a data-clipboard-text="https://github.wdf.sap.corp/pages/I820920/capextensibility/Functionality/Extending/Extensibility/#extending-cloud-for-utilities-c4u-co" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Extending Cloud for Utilities (C4U CO)" href="#extending-cloud-for-utilities-c4u-co">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div><p>This document provides a step-by-step process to extend C4U CO while
also providing in depth technical information that will allow you to
extend C4U CO functionality for your use cases.</p>
<p>C4U CO is built upon the <a class="gdoc-markdown__link" href="https://cap.cloud.sap/docs/">SAP Cloud Application Programming Model
framework</a> which allows C4U CO to focus on
exposing its vast domain expertise by:</p>
<ul>
<li>Focusing on the core domain and domain logic.</li>
<li>Basing design on the models of the domain.</li>
<li>Evolving the models by always collaborating with domain experts.</li>
</ul>
<p><strong>CDS</strong></p>
<p>Since the primary focus of the framework is through <a class="gdoc-markdown__link" href="https://martinfowler.com/bliki/DomainDrivenDesign.html">domain driven
design</a> it makes
sense to familiarize yourself with SAP’s
<a class="gdoc-markdown__link" href="https://cap.cloud.sap/docs/cds/">CDS</a> universal modeling language. Once
you are familiar with CDS it will become easier to create both service
and database extensions.</p>
<p>CDS models are plain JSON objects that comply to the <a class="gdoc-markdown__link" href="https://cap.cloud.sap/docs/cds/csn">Core Schema
Notation</a> (An open specification
derived from JSON schema), which are in a very easily readable human
format. The models are what drive the CAP service runtimes and databases
as illustrated below:</p>
<p><img src="media/image1.png" style="width:3.535in;height:2.14404in" /></p>
<p>For complete documentation of CDS please refer to the following
<a class="gdoc-markdown__link" href="https://cap.cloud.sap/docs/cds/cdl#entity-and-type-definitions">link</a>.</p>
<div class="gdoc-page__anchorwrap">
    <h2 id="subscribe-to-sap-cloud-for-utilities-foundation-retailer">
        Subscribe to SAP Cloud for Utilities Foundation Retailer
        <a data-clipboard-text="https://github.wdf.sap.corp/pages/I820920/capextensibility/Functionality/Extending/Extensibility/#subscribe-to-sap-cloud-for-utilities-foundation-retailer" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Subscribe to SAP Cloud for Utilities Foundation Retailer" href="#subscribe-to-sap-cloud-for-utilities-foundation-retailer">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div><ol>
<li>
<p>Go to<a class="gdoc-markdown__link" href="https://account.hana.ondemand.com">https://account.hana.ondemand.com</a> and login to your SAP BTP
Subaccount from where you will be subscribing to SAP Cloud for
Utilities Foundation Retailer.</p>
<p><strong>Note:</strong> If you have more than one subaccount choose the one from where you wish to subscribe C4U</p>
</li>
<li>
<p>Choose “Instances and Subscriptions”</p>
</li>
</ol>
<p><img src="media/image2.png" style="width:1.81425in;height:2.16807in" /></p>
<ol start="3">
<li>Subscribe to C4U from the SAP BTP Cockpit by clicking on “Create”
button underneath your profile name.</li>
</ol>
<p><img src="media/image3.png" style="width:5.93277in;height:0.84935in" /></p>
<ol start="4">
<li>
<p>A dialog box will appear asking which service you wish to subscribe
to.</p>
<ol>
<li>Choose “Cloud for Utilities Foundation Retailer” from the
dropdown.</li>
<li>Select “default” as the plan.</li>
</ol>
</li>
</ol>
<p><img src="media/image4.png" style="width:3.57566in;height:3.35294in" /></p>
<ol start="5">
<li>After having subscribed to SAP Cloud for Utilities Foundation
Retailer Development you will see that the subscription is processing.</li>
</ol>
<img src="media/image5.png"/>
<ol start="6">
<li>Once subscription has completed, the status will change from
processing to completed.</li>
</ol>
<blockquote>
<p><img src="media/image6.png" style="width:5.76471in;height:0.17922in" /></p>
</blockquote>
<div class="gdoc-page__anchorwrap">
    <h2 id="service-broker-instances">
        Service Broker Instances
        <a data-clipboard-text="https://github.wdf.sap.corp/pages/I820920/capextensibility/Functionality/Extending/Extensibility/#service-broker-instances" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Service Broker Instances" href="#service-broker-instances">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div><p>The service which implements the service broker API is referred to as
the “Service Broker”. A service instance represents varies. In our
context different service broker instances are created to offer
different scopes required by the calling application.</p>
<p>For instance, you may wish to setup a service broker with only API Read
or API Write rights. Extensibility is a special case and requires the
following scopes depending on your situation:</p>
<ol>
<li>
<p><strong>ExtendCDS</strong></p>
<p>Allows the extension developer to create and activate an extension.</p>
</li>
<li>
<p><strong>ExtendCDSDelete</strong></p>
<p>Allows the extension developer to delete tables created by a previous extension.</p>
</li>
</ol>
<p>These scopes are not given by default by edom retailer and require a new
service broker instance to be created with the above scopes to retrieve
the proper jwt token for acess.</p>
<p>Before starting ensure that you have more than one entitlement.</p>
<p><strong>Note:</strong></p>
<p>The same process can be used to create different credentials with
different scopes. E.g., You may wish to create a service instance with
API Read Only, or a combination of different scopes depending on how you
wish to give access.</p>
<div class="gdoc-page__anchorwrap">
    <h2 id="create-an-instance-of-service-broker-for-api-access">
        Create an Instance of Service Broker for API Access
        <a data-clipboard-text="https://github.wdf.sap.corp/pages/I820920/capextensibility/Functionality/Extending/Extensibility/#create-an-instance-of-service-broker-for-api-access" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Create an Instance of Service Broker for API Access" href="#create-an-instance-of-service-broker-for-api-access">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div><p>In order to be able to access the API, we will create an instance of the
Edom Retailer API that will give us the ability to query the released
API.</p>
<ol>
<li>From your subaccount choose “Instances and Subscriptions”</li>
</ol>
<p><img src="media/image2.png" style="width:1.81425in;height:2.16807in" /></p>
<ol start="2">
<li>Create an instance by clicking on the Create button.</li>
</ol>
<p><img src="media/image3.png" style="width:5.93277in;height:0.84935in" /></p>
<ol start="3">
<li>
<p>The following dialog will appear, choose the C4U CO Retailer API.</p>
<p>It will prompt to create a space in Cloud Foundry if you have not already done so.</p>
<p>Give the instance a name. The instance name must be unique across your organization.</p>
</li>
</ol>
<p><img src="media/image7.png" style="width:3.58924in;height:3.39349in" /></p>
<ol start="4">
<li>Since we do not want to use the default rights, hit Next to create
our modified instance for extensibility.</li>
</ol>
<p><img src="media/image8.png" style="width:3.34726in;height:3.11605in" /></p>
<ol start="5">
<li>The following screen dialog will appear:</li>
</ol>
<p><img src="media/image9.png"  /></p>
<ol start="6">
<li>This is the important step where we decide what scopes we will give to the instance. In this step we must provide json with the correct
additional rights.</li>
</ol>
<p>The format of the json is the following:</p>
<pre><code>{
   &quot;xs-security&quot;: {

      &quot;xsappname&quot;: &quot;c4u-foundation-retailer-dev-service-&lt;random-numbers&gt;&quot;,
      &quot;oauth2-configuration&quot;: {
         &quot;grant-types&quot;: [
            &quot;client\_x509&quot;,
            &quot;client\_credentials&quot;
         ]
      },
      &quot;authorities&quot;: \[
         Array of scopes you wish to add
      ]
   }
}
</code></pre><p>The “xsappname” refers to the edom retailer application. Above refers to the “dev-service” however in production it will be simply “service” therefore the xsappname would be
&ldquo;c4u-foundation-retailer-dev-service-&lt;random-numbers&gt;&rdquo;</p>
<p>&ldquo;random numbers&rdquo; is required to differentiate the service broker instance from others. You may wish even to set it up uniquely by giving it a unique suffix. (TODO: determine a naming convention).</p>
<p>Scopes you wish to add must be given in the following format:</p>
<pre><code>&quot;authorities&quot; : [
   &quot;$XSMASTERAPPNAME.ExtendCDS&quot;,
   &quot;$XSMASTERAPPNAME.API.Read&quot;,
   &quot;$XSMASTERAPPNAME.API.Write&quot;
]
</code></pre><p><strong>**</strong> If this step is skipped the ExtendCDS scope will not be given to the jwt token. The developer will be able to still create extensions but will not be able to double check or view them. It is best add extra scopes for the extension developer in this case so they may be able to view and edit without having to retrieve a different token for other operations.</p>
<p>Therefore, create a json similar to:</p>
<pre><code>{
   &quot;xs-security&quot;: {
      &quot;xsappname&quot;: &quot;c4u-cn-edom-retailer-clone-789&quot;,
      &quot;oauth2-configuration&quot;: {
         &quot;grant-types&quot;: [
            &quot;client_x509&quot;,
            &quot;client_credentials&quot;
         ]
      },
      &quot;authorities&quot;: [
         &quot;$XSMASTERAPPNAME.API.Write&quot;,
         &quot;$XSMASTERAPPNAME.API.Read&quot;,
         &quot;$XSMASTERAPPNAME.ExtendCDS&quot;
      ]
   }
}
</code></pre><ol start="7">
<li>Add the Json to the dialog box:</li>
</ol>
<p><img src="media/image10.png"  /></p>
<ol start="8">
<li>Double check your setting and then click Create</li>
</ol>
<p><img src="media/image11.png" /></p>
<ol start="9">
<li>The following dialog will appear:</li>
</ol>
<p><img src="media/image12.png" /></p>
<ol start="10">
<li>Our instance should now be created:</li>
</ol>
<p><img src="media/image13.png"  /></p>
<div class="gdoc-page__anchorwrap">
    <h2 id="setup-the-service-key">
        Setup the Service Key
        <a data-clipboard-text="https://github.wdf.sap.corp/pages/I820920/capextensibility/Functionality/Extending/Extensibility/#setup-the-service-key" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Setup the Service Key" href="#setup-the-service-key">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div><p>Now that we have created the instance we need to create a service key. With the service key we will be able to create an oauth token that will give us the ability to query our api.</p>
<ol>
<li>
<p>From the Instances table, locate the row with our newly created
instance name and left click the ellipsis (…).</p>
<p>The following menu will appear:</p>
</li>
</ol>
<p><img src="media/image14.png"  /></p>
<ol start="2">
<li>Choose “Create Service Key” and the following dialog will appear:</li>
</ol>
<p><img src="media/image15.png"  /></p>
<ol start="3">
<li>Choose a name for our service key and click “Create”</li>
</ol>
<p><img src="media/image16.png"  /></p>
<ol start="4">
<li>Our instance should now have a service key attached to it.</li>
</ol>
<p><img src="media/image17.png"  /></p>
<ol start="5">
<li>Left click on the ellipsis to view our service key credentials that
have been created</li>
</ol>
<p><img src="media/image18.png"  /></p>
<ol start="6">
<li>Select “View” to see our credentials. The sections we are interested
in are:</li>
</ol>
<p>clientid, clientsecret and url.</p>
<p><img src="media/image19.png"  /></p>
<p>You could also switch to “Form” View which might be easier to copy the
required information:</p>
<p><img src="media/image20.png"  /></p>
<div class="gdoc-page__anchorwrap">
    <h2 id="create-our-access-token">
        Create our Access Token
        <a data-clipboard-text="https://github.wdf.sap.corp/pages/I820920/capextensibility/Functionality/Extending/Extensibility/#create-our-access-token" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Create our Access Token" href="#create-our-access-token">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div><p>Now that we have successfully created our service key, we can use the
above values to generate our Oauth2 access token. For this example, we
will be using Postman and curl.</p>
<p>BTP (Business Technology Platform) reference documentation can be found here:</p>
<p><a class="gdoc-markdown__link" href="https://help.sap.com/viewer/65de2977205c403bbc107264b8eccf4b/Cloud/en-US/6391b5dfe4704c6c8b71a32126828e9c.html">https://help.sap.com/viewer/65de2977205c403bbc107264b8eccf4b/Cloud/en-US/6391b5dfe4704c6c8b71a32126828e9c.html</a></p>
<p>Postman <a class="gdoc-markdown__link" href="https://www.postman.com/downloads/">https://www.postman.com/downloads/</a></p>
<ol>
<li>Start a new query and select the authorization tab. Choose as the
type of authorization “Oauth 2.0”. For curl skip to the last step.</li>
</ol>
<p><img src="media/image21.png"  /></p>
<ol start="2">
<li>In the configure new token section add the information we have
previously retrieved from the service key. Give your token a name
and proceed filling in the required information.</li>
</ol>
<p><img src="media/image22.png"  /></p>
<p>i. Grant type = “Client Credentials”<br>
ii. Access token Url = (service key url) /oauth/token \</p>
<p>E.g. if our service key url was : <a class="gdoc-markdown__link" href="https://oursubaccount.authentication.eu10.hana.ondemand.com">https://oursubaccount.authentication.eu10.hana.ondemand.com</a></p>
<p>Then the access token url would be: <a class="gdoc-markdown__link" href="https://oursubaccount.authentication.eu10.hana.ondemand.com/oauth/token">https://oursubaccount.authentication.eu10.hana.ondemand.com/oauth/token</a></p>
<p>iii. Client ID = clientid from the service key \</p>
<p>iv. Client Secret = clientsecret from the service key. \</p>
<ol start="3">
<li>Click the “Get New Access Token” button.</li>
</ol>
<p><img src="media/image23.png" style="width:3.5084in;height:1.06064in" /></p>
<ol start="4">
<li>You should receive a valid token dialog:</li>
</ol>
<p><img src="media/image24.png" style="width:3.62605in;height:2.15515in" /></p>
<ol start="5">
<li>Double check that you have the correct scopes for this token.</li>
</ol>
<p>Scroll down in the Token Details dialog until you reach the scope key and verify that the “ExtendCDS” scope is there.</p>
<p><img src="media/image25.png" style="width:4.99919in;height:3.62673in" /></p>
<p>If the scope is not there, double check to make sure you created the service instance with the correct json payload. (See above)</p>
<ol start="6">
<li>Click the “Use Token”. You can now share this token with other
requests based on the name you have given it.</li>
</ol>
<p><img src="media/image26.png" style="width:3.97899in;height:2.65929in" /></p>
<ol start="7">
<li>Test a simple get.</li>
</ol>
<p>Using your subdomain, you should be able to query for metadata to make
sure our token is functioning properly.</p>
<p><img src="media/image27.png" style="width:5.37395in;height:0.50406in" /></p>
<ol start="8">
<li>
<p>In the response you should now see metadata returned from the Edom
retailer.</p>
<p><img src="media/image28.png" style="width:5.03277in;height:2.46839in" /></p>
</li>
<li>
<p>If instead you need to retrieve the token using curl. Take the
information you obtained previously for the clientid, clientsecret,
url and plug them into the following command line:</p>
</li>
</ol>
<pre><code>
curl --location --request POST '&lt;url&gt;/oauth/token'
--header 'Content-Type: application/x-www-form-urlencoded'
--header 'Authorization: Basic [base64.encoded(client_id:client_secret)](&lt;base64.encoded(client_id:client_secret)&gt;)'
--data-urlencode 'client_id=&lt;client_id&gt;'
--data-urlencode 'grant_type=client_credentials'

</code></pre><p>This will return the access token which you can use in another or
request or plug into postman as the value for the Authorization key.</p>
<p>Eg.<br>
Bearer: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJS</p>
<div class="gdoc-page__anchorwrap">
    <h2 id="setup-the-roles-for-your-extension-developers">
        Setup the Roles for your extension Developers.
        <a data-clipboard-text="https://github.wdf.sap.corp/pages/I820920/capextensibility/Functionality/Extending/Extensibility/#setup-the-roles-for-your-extension-developers" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Setup the Roles for your extension Developers." href="#setup-the-roles-for-your-extension-developers">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div><p>C4U CO comes with different roles that need to be assigned to extension
developers. Currently there are two possible roles:</p>
<ol>
<li><strong>ExtensionDeveloper:</strong></li>
</ol>
<p>This role is intended for an extension developer to be able to develop an extension.</p>
<ol start="2">
<li>
<p><strong>ExtensionDeveloperUndeploy:</strong></p>
<p>This role is intended for an extension developer to be able to developand extension and also be able to remove it.</p>
<p>As shown below:</p>
</li>
</ol>
<p><img src="media/image29.png" style="width:6.5in;height:1.40764in" /></p>
<p>Note: It is also a best practice to assign an application role to the developer so they have the ability to run the application and view the
extension in action.</p>
<ol>
<li>
<p>Create the Role Collection</p>
<p>Depending on the level of granulation you can decide to add other roles
that are felt the developer should have, however for the purpose of
developing extensions we will adhere only to the extension roles.</p>
<p>From BTP Cockpit choose Role Collections as shown below:</p>
</li>
</ol>
<p><img src="media/image30.png" style="width:1.59695in;height:3.46557in" /></p>
<ol start="2">
<li>Create a new role collection by clicking the “+” button.</li>
</ol>
<p><img src="media/image31.png" style="width:6.5in;height:0.59861in" /></p>
<ol start="3">
<li>Give a name to the Extension Role Collection you are creating:</li>
</ol>
<p><img src="media/image32.png" style="width:2.70858in;height:1.03858in" /></p>
<p>Click Create when you are finished.</p>
<ol start="4">
<li>You will now see the newly created role collection in the role
collection table.</li>
</ol>
<p><img src="media/image33.png" style="width:5.93003in;height:0.43715in" /></p>
<ol start="5">
<li>Click the Arrow to start adding the roles.</li>
</ol>
<p><img src="media/image34.png" style="width:5.58804in;height:0.41194in" /></p>
<ol start="6">
<li>From the Role Collection Screen, click the Create button.</li>
</ol>
<p><img src="media/image35.png" style="width:5.26891in;height:2.4729in" /></p>
<ol start="7">
<li>Choose the appropriate role names from the selection box.</li>
</ol>
<p><img src="media/image36.png" style="width:5.05882in;height:1.5998in" /></p>
<ol start="8">
<li>Filter your possible selections by choosing c4u-foundation-retailer
from the Application Identifier.</li>
</ol>
<p><img src="media/image37.png" style="width:4.89076in;height:3.40315in" /></p>
<ol start="9">
<li>
<p>Select the roles for the Extension developer. Choose at a minimum the ExtensionDeveloper to develop extensions. If you wish the
developer to be able to undeploy the extension then also choose the ExtensionDeveloperUndeploy Role.</p>
<p>In our example we will also choose the RetailerAdmin, however this is only for demonstration purposes.</p>
</li>
</ol>
<p><img src="media/image38.png" style="width:6.5in;height:2.48611in" /></p>
<ol start="10">
<li>Select Add when you are finished.</li>
</ol>
<p><img src="media/image39.png" style="width:5.28786in;height:3.68907in" /></p>
<ol start="11">
<li>Your screen should now be similar to this:</li>
</ol>
<p><img src="media/image40.png" style="width:5.23291in;height:2.29052in" /></p>
<ol start="12">
<li>Now we can assign the new users to this role collection. If users
have already been created in your subaccount goto the Assign Users
section below.</li>
<li>Assign the users by entering in their emails</li>
</ol>
<p><img src="media/image41.png" style="width:5.19261in;height:2.46982in" /></p>
<ol start="14">
<li>Select the users you wish to assign the roles to by Selecting
“Users” underneath Security in the left-navigation menu and then
click the “+” button</li>
</ol>
<p><img src="media/image42.png" style="width:5.07851in;height:0.72054in" /></p>
<ol start="15">
<li>Click save to finish</li>
</ol>
<p><img src="media/image43.png" style="width:5.59985in;height:1.09783in" /></p>
<div class="gdoc-page__anchorwrap">
    <h2 id="assign-existing-users">
        Assign Existing Users
        <a data-clipboard-text="https://github.wdf.sap.corp/pages/I820920/capextensibility/Functionality/Extending/Extensibility/#assign-existing-users" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Assign Existing Users" href="#assign-existing-users">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div><ol>
<li>From the BTP Cockpit choose Users underneath the Security menu.</li>
</ol>
<p><img src="media/image44.png" style="width:1.42064in;height:2.6667in" /></p>
<ol start="2">
<li>Select the user to assign the roles to from the user table by
selecting the arrow “&gt;” on the far right.</li>
</ol>
<p><img src="media/image45.png" style="width:6.5in;height:1.67986in" /></p>
<ol start="3">
<li>Select “Assign Role Collection”.</li>
</ol>
<p><img src="media/image46.png" style="width:5.39916in;height:0.87275in" /></p>
<ol start="4">
<li>From the dialog box select the Extension roles you wish to assign to
the user.</li>
</ol>
<p><img src="media/image47.png" style="width:4.28151in;height:1.13808in" /></p>
<ol start="5">
<li>Use the previously created role collection to assign to your users
by clicking the Assign Role Collection Button.</li>
</ol>
<p><img src="media/image48.png" style="width:3.7933in;height:0.98926in" /></p>
<ol start="6">
<li>
<p>The developer(s) are now ready to start their extension.</p>
<p>These roles are defined as “ExtendCDS” and “ExtendCDSDelete”.
Once these have been added the developer can now start the extension.</p>
</li>
</ol>
<div class="gdoc-page__anchorwrap">
    <h2 id="project-setup">
        Project Setup
        <a data-clipboard-text="https://github.wdf.sap.corp/pages/I820920/capextensibility/Functionality/Extending/Extensibility/#project-setup" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Project Setup" href="#project-setup">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div><p>Before starting the extension, project be sure to have the following
setup:</p>
<ol>
<li>Either SAP Business Application Studio or Visual Studio Code.
You can find information on how to setup <a class="gdoc-markdown__link" href="https://cap.cloud.sap/docs/get-started/">here</a>.</li>
<li>The cloud foundry command line<a class="gdoc-markdown__link" href="https://github.com/cloudfoundry/cli">here</a>.</li>
</ol>
<div class="gdoc-page__anchorwrap">
    <h2 id="creating-the-extension-project-vs-code--part-i">
        Creating the Extension Project (VS Code) – Part I
        <a data-clipboard-text="https://github.wdf.sap.corp/pages/I820920/capextensibility/Functionality/Extending/Extensibility/#creating-the-extension-project-vs-code--part-i" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Creating the Extension Project (VS Code) – Part I" href="#creating-the-extension-project-vs-code--part-i">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div><p>The extension is always derived from the default provider application
(in this case, C4U CO Edom Retailer).</p>
<p><strong>Prerequisites:</strong></p>
<p>Before starting the extension project, there are a few prerequisites
required:</p>
<p>Variables:</p>
<ol>
<li>The SAP Cloud for Utilities Foundation Retailer URL you will be
extending:</li>
</ol>
<p><a class="gdoc-markdown__link" href="https://edom-retailer-dev-dev-edom-retailer-srv.cfapps.eu10.hana.ondemand.com/">https://edom-retailer-dev-dev-edom-retailer-srv.cfapps.eu10.hana.ondemand.com/</a></p>
<ol>
<li>
<p>Your subaccount.</p>
<p>The subaccount in which you subscribed to the application (SAP Cloud for Utilities Foundation Retailer).</p>
<p>From the SAP BTP Cockpit, choose Overview.</p>
</li>
</ol>
<p><img src="media/image49.png" style="width:1.68854in;height:1.70238in" /></p>
<p>The Subaccount Subdomain will be listed in the main page such as:</p>
<p><img src="media/image50.png" style="width:3.90336in;height:1.50463in" /></p>
<p><strong>Note:</strong> (TODO: If you have a custom domain setup …. ????</p>
<ol start="2">
<li>Create an empty directory in a preferred location on your computer.</li>
<li>Open VS Code and choose the newly created directoy. (File -&gt;
Open)</li>
<li>Prepare the final url:</li>
</ol>
<ul>
<li>Create a new terminal in vscode</li>
<li>Set the following env variable:</li>
</ul>
<p>C4UDomain = “<a class="gdoc-markdown__link" href="https://edom-retailer-dev-dev-edom-retailer-srv.cfapps.eu10.hana.ondemand.com/">https://edom-retailer-dev-dev-edom-retailer-srv.cfapps.eu10.hana.ondemand.com/</a></p>
<p>SUBDOMAIN= your subdomain</p>
<p>e.g. SUBDOMAIN = edom-consumer-mtx</p>
<ul>
<li>The extension is always based on the deployed version of the existing application.</li>
</ul>
<p>The deployment removes existing routes already created , they need to be recreated. (bug? Or saas-deploy)</p>
<p>Based on our variables from above the complete domain is:</p>
<p><a href="https://edom-consumer-mtx-edom-retailer-dev-srv.cfapps.eu10.hana.ondemand.com">https://edom-consumer-mtx-edom-retailer-dev-srv.cfapps.eu10.hana.ondemand.com</a></p>
<p><strong>Note</strong>: The domain-subdomain separator is a “.” in production not the
“-“ as listed in the line directly above.</p>
<ol start="5">
<li>
<p>Ensure you have been given the correct roles from the role template
(at least ExtendCDS)</p>
<p><strong>Please see above if this is not the case.</strong></p>
</li>
<li>
<p>Login to your Cloud Foundry space.</p>
<p>If you are not in your cloud foundry space you may run into issues.</p>
</li>
<li>
<p>From the terminal execute the following command:</p>
<p>Reference for the cds extend command can be found <a class="gdoc-markdown__link" href="https://cap.cloud.sap/docs/guides/extensibility#start-extension-project">here</a></p>
<pre><code>cds extend -s edom-consumer-mtx [https://edom-retailer-dev-srv.cfapps.eu10.hana.ondemand.com](https://edom-retailer-dev-srv.cfapps.eu10.hana.ondemand.com)
</code></pre><p>As a security precaution you will be prompted for a passcode. The passcode comes from your btp subaccount.</p>
<p>Therefore, in this case the passcode would be:</p>
<p><a class="gdoc-markdown__link" href="https://edom-consumer-mtx.authentication.eu10.hana.ondemand.com/passcode">https://edom-consumer-mtx.authentication.eu10.hana.ondemand.com/passcode</a></p>
<p><strong>Note:</strong> You can shorten the workflow to <a class="gdoc-markdown__link" href="https://cap.cloud.sap/docs/guides/extensibility#save-authentication-token-for-simplified-workflow">save the
passcode</a>
to not have to query on every iteration.</p>
</li>
<li>
<p>If everything is successful you will see a message similar to the
following:</p>
</li>
</ol>
<pre><code>   Creating extension project for
   https://edom-retailer-dev-srv.cfapps.eu10.hana.ondemand.com, subdomain
   'edom-consumer-mtx', in folder '/Users/ c4uRetailerExtension'

   Retrieving files...
</code></pre><p>The following folder structure should be created:</p>
<p><img src="media/image51.png" style="width:2.19127in;height:0.98144in" /></p>
<p>Congratulations you are ready to start your new extension project!</p>
<p><strong>Note:</strong> It is a best practice to use some type of version control to track
your extension project changes.</p>
<div class="gdoc-page__anchorwrap">
    <h2 id="the-extension-project-folder-structure">
        The Extension Project Folder Structure
        <a data-clipboard-text="https://github.wdf.sap.corp/pages/I820920/capextensibility/Functionality/Extending/Extensibility/#the-extension-project-folder-structure" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor The Extension Project Folder Structure" href="#the-extension-project-folder-structure">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div><p>Before starting our project it makes sense to understand the extension
folder we have extended:</p>
<p>As you have noticed the folder structure consists of the following
directories:</p>
<pre><code>.
├── CAP Directory Structure
├── db
│ ├── This folder is where you put your extensions of entities and UIs (Fiori Elements). (link to fiori elements?)
│ └── (see db inside node\_modules for reference of models which can beextended)
├── node_modules
│ └── Expanding this folder you will notice an embedded structure:
├── This is the reference models and services exposed that you are able to extend.
│ └── base
│ └── _i18n : This contain the i18n of the provider.
│ ├── Open the file and see the i18n keys and values.
│ ├── db : The entities available to extend./
│ │ ├── (The following is an example of the exposed list)
│ │ ├── Please refer to released documentation to understand in detail the referenced
│ │ └── entities.(get link)
│ │ └── models
│ │ ├── alpha
│ │ │ ├── configuration
│ │ │ ├── external
│ │ │ ├── mdiclient
│ │ │ └── serviceprovider
│ │ ├── extensions
│ │ │ ├── dpp
│ │ │ ├── BusinessPartnerServiceProviderExtensions.cds
│ │ │ ├── CustomerOrderUtilitiesExtensions.cds
│ │ │ └── Index.cds
│ │ └── odm
│ │ ├── billingaccount
│ │ ├── businesspartner
│ │ ├── common
│ │ ├── finance
│ │ ├── orgunit
│ │ ├── procurement
│ │ ├── product
│ │ ├── sales
│ │ └── index.cds
│ └── srv: The services that can be extended. (The following is an example of the exposed list)
│ ├── alpha
│ ├── api
│ ├── dpp
│ ├── external
│ ├── monitoring
│ ├── cds-mtx-auth.cds
│ └── service.cds
├── srv
└── This folder is where you put your extensions of services. (see srv inside of node_modules for reference)
</code></pre><p><strong>Note</strong>: There is also a node_modules directory inside of _base,
this can be ignored.</p>
<p>Avoid running npm install otherwise it will delete the _base folder.</p>
<div class="gdoc-page__anchorwrap">
    <h2 id="creating-the-extension-project-vs-code--part-ii-simple-extension">
        Creating the Extension Project (VS Code) – Part II (Simple Extension)
        <a data-clipboard-text="https://github.wdf.sap.corp/pages/I820920/capextensibility/Functionality/Extending/Extensibility/#creating-the-extension-project-vs-code--part-ii-simple-extension" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor Creating the Extension Project (VS Code) – Part II (Simple Extension)" href="#creating-the-extension-project-vs-code--part-ii-simple-extension">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div><p>Now that the directory structure has been created, we need to determine
what extensions we would like to make.</p>
<p>The following are some of the boundary conditions we have to keep in
mind before creating our extension:</p>
<ol>
<li>
<p>Some entity names are reserved.</p>
<p>As expected prefixes of namespace extensions cannot be prefixed with com.sap.* or sap.*</p>
</li>
<li>
<p>In accordance with SAP customer extensions best practices, elements must be prefixed with either “Z_” or “Z__”</p>
</li>
<li>
<p>The maximum number of new entities (db) or new fields (srv – services) is 42.</p>
</li>
</ol>
<p>We will start with a simple extension and then gradually build up. (Is
this possible in CAP?? To reset? Sent email)</p>
<p>As mentioned previously, as with any development project there should be
some type of version control.</p>
<p>Let’s get started, In this example we will extend CustomerOrder.</p>
<ol>
<li>
<p>In VSCode create a file in the outer db directory and name it
CustomerOrder_db_ext.cds (The naming of the file is not important
however it must maintain the “.cds” extension)</p>
<p>Add the following to the file (keeping in mind the boundary
conditions from above)</p>
</li>
</ol>
<pre><code>
using sap.odm.sales from '\_base/db/models/odm/sales/Customer';

namespace Z_edom.extension;

using { cuid, managed } from '@sap/cds/common';

entity Z_RefPOs : cuid, managed {
   email : String;
   firstName : String;
   lastName : String;
}
</code></pre><ol start="2">
<li>Create a file in the outer srv directory and name it
Customer_srv_ext.cds (Again the naming of the file is not
important however remember to maintain the “.cds” extension.</li>
</ol>
<p>Add the following to the file:</p>
<pre><code>using from '_base/srv/api/API\_EDOM\_RETAILER';
using {Z_edom.extension as ext} from '../db/CustomerOrder\_db\_ext';

extend service API\_EDOM\_RETAILER with {
  entity Z_RefPOs as projection on ext.Z_RefPOs;
}
</code></pre><ol start="3">
<li>Activate the extension.</li>
</ol>
<p>We activate the extension by executing the following in the terminal:</p>
<pre><code>cds activate --to https://edom-consumer-mtx-edom-retailer-dev-srv.cfapps.eu10.hana.ondemand.com -s edom-consumer-mtx
</code></pre><p><strong>Remember</strong>:</p>
<p>In this case the “–to” represents the full url (subdomain + domain) the -s represents the subdomain</p>
<ol start="4">
<li>
<p>You may be prompted for a passcode.</p>
<p>The passcode is found on the subdomain. In this case it would be:</p>
<p><a href="https://edom-consumer-mtx.authentication.eu10.hana.ondemand.com/passcode">https://edom-consumer-mtx.authentication.eu10.hana.ondemand.com/passcode</a></p>
</li>
<li>
<p>The output from the command will be similar to:</p>
<p><strong>Note:</strong> The authentication token is not saved by default. To save the token for later commands, please run `cds login`.</p>
</li>
</ol>
<pre><code> Activating extension located at /Users to URL
 https://edom-consumer-mtx-edom-retailer-dev-srv.cfapps.eu10.hana.ondemand.com

 Activating extension...

 Extension active
</code></pre><ol start="6">
<li>Congratulations the extension is now active!</li>
<li>As noted from the output above you can save the passcode token if
you wish to continue modify the extension.</li>
</ol>
<p><strong>Querying the extension (??? Info is from provider perspective because
no app xsuaa exposed in client – follow up with CAP team about this)</strong></p>
<p>Once the extension has been activated, we need to verify if the data
exists.</p>
<p>In order to be able to query from postman we need authorization to be
able to view the data.</p>
<p>To get a new token from postman we need to query the authentication
point in the following dialog:</p>
<p><img src="media/image52.png" style="width:4.49281in;height:3.84177in" /></p>
<ol>
<li>Retreive the Service Key that we used in the previous step taking the client Id, client secret and url.</li>
<li>The authentication url would be the url above + ‘/oauth/token’</li>
<li>Click “Get New Access Token”</li>
<li>Name and copy the token for your requests.</li>
</ol>
<p><strong>Note</strong> – The token has a time limit so you may need to generate a new
one, depending on how much time has elapsed since the previous time you
used it.</p>
<p>Examples:</p>
<div class="gdoc-page__anchorwrap">
    <h3 id="the-provider-should-not-have-any-extension">
        The provider should not have any extension
        <a data-clipboard-text="https://github.wdf.sap.corp/pages/I820920/capextensibility/Functionality/Extending/Extensibility/#the-provider-should-not-have-any-extension" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor The provider should not have any extension" href="#the-provider-should-not-have-any-extension">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div><ol>
<li>Query the provider</li>
</ol>
<pre><code>   GET:https://edom-retailer-dev-srv.cfapps.eu10.hana.ondemand.com/api/v1/$metadata
</code></pre><ol start="2">
<li>Check the results that the extension information is not there</li>
</ol>
<p><img src="media/image53.png" style="width:6.08333in;height:4.11111in" /></p>
<p>Perfect none there.</p>
<div class="gdoc-page__anchorwrap">
    <h3 id="the-consumer-being-able-to-verify-their-own-extensions">
        The consumer being able to verify their own extensions
        <a data-clipboard-text="https://github.wdf.sap.corp/pages/I820920/capextensibility/Functionality/Extending/Extensibility/#the-consumer-being-able-to-verify-their-own-extensions" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor The consumer being able to verify their own extensions" href="#the-consumer-being-able-to-verify-their-own-extensions">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div><p>In this case edom-consumer-mtx is the subdomain or consumer or extender</p>
<p>Edom-extenstibility-test-dev is the provider or base</p>
<ol>
<li>If there isn’t a route create for the service (for the subdomain)
this needs to be created. (</li>
</ol>
<p><img src="media/image54.png" style="width:6.5in;height:1.72083in" /></p>
<ol start="2">
<li>
<p>Use postman to retrieve the proper auth token.
The token is delivered by the subaccount</p>
<p><img src="media/image55.png" style="width:4.48319in;height:3.74264in" /></p>
</li>
<li>
<p>Access to token uri is the subdomain:</p>
<p><a href="https://edom-consumer-mtx.authentication.eu10.hana.ondemand.com/oauth/token">https://edom-consumer-mtx.authentication.eu10.hana.ondemand.com/oauth/token</a></p>
<p>Client Id/Client secret are the env variables of the srv.
Application in the xsuaa section</p>
<p>&ldquo;clientid&rdquo;: &ldquo;clientid&rdquo;,</p>
<p>&ldquo;clientsecret&rdquo;: &ldquo;clientsecret”</p>
<p>“url”: “url” + ‘/oauth/token’</p>
</li>
<li>
<p>Query the subaccount for the extension, we want to see the metadata</p>
<p><a href="https://edom-consumer-mtx-edom-extensibility-test-dev-cpapp-srv.cfapps.eu10.hana.ondemand.com/service/test/$metadata">https://edom-consumer-mtx-edom-extensibility-test-dev-cpapp-srv.cfapps.eu10.hana.ondemand.com/service/test/$metadata</a></p>
<p><img src="media/image56.png" style="width:6.5in;height:1.98264in" /></p>
</li>
<li>
<p>View the extended data.<code>&lt;img src=&quot;media/image57.png&quot; style=&quot;width:6in;height:5.69444in&quot; /&gt;</code></p>
</li>
</ol>


    </article>


            </div>
        </main>

 
    </div>
    <p></p>
    <p></p>
    <br>
    
    <footer class="gdoc-footer">
    <div class="container flex flex-wrap">
        <span class="gdoc-footer__item">
            Built with <a href="https://gohugo.io/" class="gdoc-footer__link">Hugo</a> and
            <svg class="icon gdoc_heart"><use xlink:href="#gdoc_heart"></use></svg>
        </span>
        
        
    </div>
</footer>


    
</body>
</html>
